import{getNotFound as ae}from"./@qwik-city-not-found-paths.js";import{isStaticPath as ne}from"./@qwik-city-static-paths.js";import{_ as ie,a as se,v as oe,q as le}from"./assets/@qwik-city-plan-5a6fdc9c.js";import{s as ce,r as fe,m as ue}from"./assets/entry.ssr-bcc836f7.js";var B=class extends Error{constructor(e,t){super(t),this.status=e}};function de(e,t){let r="Server Error";return t!=null&&(typeof t.message=="string"?r=t.message:r=String(t)),"<html>"+J(e,r)+"</html>"}function J(e,t){typeof e!="number"&&(e=500),typeof t=="string"?t=pe(t):t="";const r=typeof t=="string"?"600px":"300px",a=e>=500?ge:me;return`
<head>
  <meta charset="utf-8">
  <meta http-equiv="Status" content="${e}">
  <title>${e} ${t}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { color: ${a}; background-color: #fafafa; padding: 30px; font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Roboto, sans-serif; }
    p { max-width: ${r}; margin: 60px auto 30px auto; background: white; border-radius: 4px; box-shadow: 0px 0px 50px -20px ${a}; overflow: hidden; }
    strong { display: inline-block; padding: 15px; background: ${a}; color: white; }
    span { display: inline-block; padding: 15px; }
  </style>
</head>
<body><p><strong>${e}</strong> <span>${t}</span></p></body>
`}var he=/[&<>]/g,pe=e=>e.replace(he,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return""}}),me="#006ce9",ge="#713fc2",j={lax:"Lax",none:"None",strict:"Strict"},ye={seconds:1,minutes:1*60,hours:1*60*60,days:1*60*60*24,weeks:1*60*60*24*7},we=(e,t,r)=>{const a=[`${e}=${t}`];return typeof r.domain=="string"&&a.push(`Domain=${r.domain}`),typeof r.maxAge=="number"?a.push(`Max-Age=${r.maxAge}`):Array.isArray(r.maxAge)?a.push(`Max-Age=${r.maxAge[0]*ye[r.maxAge[1]]}`):typeof r.expires=="number"||typeof r.expires=="string"?a.push(`Expires=${r.expires}`):r.expires instanceof Date&&a.push(`Expires=${r.expires.toUTCString()}`),r.httpOnly&&a.push("HttpOnly"),typeof r.path=="string"&&a.push(`Path=${r.path}`),r.sameSite&&j[r.sameSite]&&a.push(`SameSite=${j[r.sameSite]}`),r.secure&&a.push("Secure"),a.join("; ")},be=e=>{const t={};if(typeof e=="string"&&e!==""){const r=e.split(";");for(const a of r){const i=a.split("=");i.length>1&&(t[decodeURIComponent(i[0].trim())]=decodeURIComponent(i[1].trim()))}}return t},A=Symbol("request-cookies"),O=Symbol("response-cookies"),K,Se=class{constructor(e){this[K]={},this[A]=be(e)}get(e){const t=this[A][e];return t?{value:t,json(){return JSON.parse(t)},number(){return Number(t)}}:null}getAll(){return Object.keys(this[A]).reduce((e,t)=>(e[t]=this.get(t),e),{})}has(e){return!!this[A][e]}set(e,t,r={}){const a=typeof t=="string"?t:encodeURIComponent(JSON.stringify(t));this[O][e]=we(e,a,r)}delete(e,t){this.set(e,"deleted",{...t,maxAge:0})}headers(){return Object.values(this[O])}};K=O;var xe=(e,t)=>{const r=t.headers();if(r.length>0){const a=new Headers(e);for(const i of r)a.append("Set-Cookie",i);return a}return e},T=class{},W=class extends T{},I=new WeakMap,Re="qaction",ke="qfunc";function _e(e){const{url:t,params:r,request:a,status:i,locale:o}=e,n={};a.headers.forEach((c,d)=>n[d]=c);const s=e.sharedMap.get(v),f=e.sharedMap.get(E),u=e.sharedMap.get(Ce);return{url:new URL(t.pathname+t.search,t).href,requestHeaders:n,locale:o(),nonce:u,qwikcity:{params:{...r},loadedRoute:je(e),response:{status:i(),loaders:M(e),action:s,formData:f}}}}var Ae=(e,t,r,a)=>{const i=[],o=[],n=[],s=!!(t&&ve(t[1]));return e&&z(i,o,n,e,s,r),t&&(s&&(r==="POST"&&(n.unshift(Me),n.push(Te)),n.push(We),n.push(Oe)),z(i,o,n,t[1],s,r),s&&(i.length+N.length>0&&n.push(N(i,o)),n.push(a))),n},z=(e,t,r,a,i,o)=>{for(const n of a){typeof n.onRequest=="function"?r.push(n.onRequest):Array.isArray(n.onRequest)&&r.push(...n.onRequest);let s;switch(o){case"GET":{s=n.onGet;break}case"POST":{s=n.onPost;break}case"PUT":{s=n.onPut;break}case"PATCH":{s=n.onPatch;break}case"DELETE":{s=n.onDelete;break}case"OPTIONS":{s=n.onOptions;break}case"HEAD":{s=n.onHead;break}}if(typeof s=="function"?r.push(s):Array.isArray(s)&&r.push(...s),i){const f=Object.values(n).filter(c=>Q(c,"server_loader"));e.push(...f);const u=Object.values(n).filter(c=>Q(c,"server_action"));t.push(...u)}}},Q=(e,t)=>e&&typeof e=="function"&&e.__brand===t;function N(e,t){return async r=>{if(r.headersSent){r.exit();return}const{method:a}=r,i=M(r),o=r[P];if(a==="POST"){const n=r.query.get(Re);if(n){const s=globalThis._qwikActionsMap,f=t.find(u=>u.__id===n)??s?.get(n);if(f){r.sharedMap.set(v,n);const u=await r.parseBody();if(!u||typeof u!="object")throw new Error("Expected request data to be an object");const c=await q(r,f.__validators,u);if(!c.success)i[n]=r.fail(c.status??500,c.error);else{const d=await f.__qrl(c.data,r);f.__qrl,i[n]=d}}}}e.length>0&&await Promise.all(e.map(n=>{const s=n.__id;return i[s]=q(r,n.__validators,void 0).then(f=>f.success?n.__qrl(r):r.fail(f.status??500,f.error)).then(f=>(typeof f=="function"?i[s]=f():(n.__qrl,i[s]=f),f))}))}}async function q(e,t,r){let a={success:!0,data:r};if(t)for(const i of t)if(a=await i.validate(e,r),a.success)r=a.data;else return a;return a}async function Te(e){const t=e.query.get(ke);if(t&&e.request.headers.get("X-QRL")===t&&e.request.headers.get("Content-Type")==="application/qwik-json"){e.exit();const r=e[P],a=await e.parseBody();if(Array.isArray(a)){const[i,...o]=a;if(Pe(i)&&i.getHash()===t){const n=await i.apply(e,o);e.headers.set("Content-Type","application/qwik-json"),e.send(200,await r._serializeData(n,!0));return}}throw e.error(500,"Invalid request")}}function We(e){const t=H(e),{basePathname:r,pathname:a,url:i}=e;if(!te(a)&&a!==r&&!a.endsWith(".html")){if(t){if(!a.endsWith("/"))throw e.redirect(302,a+"/"+i.search)}else if(a.endsWith("/"))throw e.redirect(302,a.slice(0,a.length-1)+i.search)}}var Pe=e=>typeof e=="function"&&typeof e.getSymbol=="function";function ve(e){const t=e[e.length-1];return t&&typeof t.default=="function"}function X(e,t){return e.pathname.endsWith(S)?e.pathname.slice(0,-S.length+(t?1:0))+e.search:e.pathname}var $=new TextEncoder;function Me({url:e,request:t,error:r}){let a=t.headers.get("origin"),i=e.origin;if(a!==i)throw r(403,`Cross-site ${t.method} form submissions are forbidden`)}function De(e){return async t=>{if(t.headersSent||t.pathname.endsWith(S))return;t.request.headers.forEach((d,m)=>d);const a=t.headers;a.has("Content-Type")||a.set("Content-Type","text/html; charset=utf-8");const i=H(t),{readable:o,writable:n}=new TextEncoderStream,s=t.getWritableStream(),f=o.pipeTo(s,{preventClose:!0}),u=n.getWriter(),c=t.status();try{const d=ee(t)==="static",m=await e({base:t.basePathname+"build/",stream:u,serverData:_e(t),containerAttributes:{["q:render"]:d?"static":""}}),p={loaders:M(t),action:t.sharedMap.get(v),status:c!==200?c:200,href:X(t.url,i)};(typeof m).html==="string"&&await u.write(m.html),t.sharedMap.set("qData",p)}finally{await u.ready,await u.close(),await f}await s.close()}}async function Oe(e){if(te(e.pathname)){try{await e.next()}catch(c){if(!(c instanceof W))throw c}if(e.headersSent||e.exited)return;const r=e.status(),a=e.headers.get("Location"),i=H(e);if(r>=301&&r<=308&&a){const c=$e(a);if(c){e.headers.set("Location",c),e.getWritableStream().close();return}else e.status(200),e.headers.delete("Location")}e.request.headers.forEach((c,d)=>c),e.headers.set("Content-Type","application/json; charset=utf-8");const n={loaders:M(e),action:e.sharedMap.get(v),status:r!==200?r:200,href:X(e.url,i),redirect:a??void 0},s=e.getWritableStream().getWriter(),u=await e[P]._serializeData(n,!0);s.write($.encode(u)),e.sharedMap.set("qData",n),s.close()}}function $e(e){if(e.startsWith("/")){const t=S,r=new URL(e,"http://localhost");return(r.pathname.endsWith("/")?r.pathname.slice(0,-1):r.pathname)+(t.startsWith("/")?"":"/")+t+r.search}else return}function He(e){const t=[];return e==="day"?e=60*60*24:e==="week"?e=60*60*24*7:e==="month"?e=60*60*24*30:e==="year"?e=60*60*24*365:e==="private"?e={private:!0,noCache:!0}:e==="immutable"?e={public:!0,immutable:!0,maxAge:60*60*24*365,staleWhileRevalidate:60*60*24*365}:e==="no-cache"&&(e={noCache:!0}),typeof e=="number"&&(e={maxAge:e,sMaxAge:e,staleWhileRevalidate:e}),e.immutable&&t.push("immutable"),e.maxAge&&t.push(`max-age=${e.maxAge}`),e.sMaxAge&&t.push(`s-maxage=${e.sMaxAge}`),e.noStore&&t.push("no-store"),e.noCache&&t.push("no-cache"),e.private&&t.push("private"),e.public&&t.push("public"),e.staleWhileRevalidate&&t.push(`stale-while-revalidate=${e.staleWhileRevalidate}`),t.join(", ")}var Y=Symbol("RequestEvLoaders"),G=Symbol("RequestEvMode"),V=Symbol("RequestEvRoute"),P=Symbol("RequestEvQwikSerializer"),Z=Symbol("RequestEvTrailingSlash"),v="@actionId",E="@actionFormData",Ce="@nonce";function Le(e,t,r,a=!0,i="/",o,n){const{request:s,platform:f,env:u}=e,c=new Se(s.headers.get("cookie")),d=new Headers,m=new URL(s.url);let p=-1,g=null,w,C=e.locale,y=200;const re=async()=>{for(p++;p<r.length;){const l=r[p],h=l(b);h instanceof Promise&&await h,p++}},x=()=>{if(g!==null)throw new Error("Response already sent")},R=(l,h)=>{if(x(),typeof l=="number"){y=l;const _=b.getWritableStream().getWriter();_.write(typeof h=="string"?$.encode(h):h),_.close()}else if(y=l.status,l.headers.forEach((k,_)=>{d.append(_,k)}),l.body){const k=b.getWritableStream();l.body.pipeTo(k)}else{if(y>=300&&y<400)return new W;b.getWritableStream().getWriter().close()}return new T},D={},L=new Map,b={[Y]:D,[G]:e.mode,[Z]:a,[V]:t,[P]:o,cookie:c,headers:d,env:u,method:s.method,params:t?.[0]??{},pathname:m.pathname,platform:f,query:m.searchParams,request:s,url:m,basePathname:i,sharedMap:L,get headersSent(){return g!==null},get exited(){return p>=U},next:re,exit:()=>(p=U,new T),cacheControl:l=>{x(),d.set("Cache-Control",He(l))},resolveValue:async l=>{const h=l.__id;if(l.__brand==="server_loader"&&!(h in D))throw new Error("You can not get the returned data of a loader that has not been executed for this request.");return D[h]},status:l=>typeof l=="number"?(x(),y=l,l):y,locale:l=>(typeof l=="string"&&(C=l),C||""),error:(l,h)=>(y=l,d.delete("Cache-Control"),new B(l,h)),redirect:(l,h)=>(x(),y=l,d.set("Location",h),d.delete("Cache-Control"),l>301&&d.set("Cache-Control","no-store"),new W),defer:l=>typeof l=="function"?l:()=>l,fail:(l,h)=>(x(),y=l,d.delete("Cache-Control"),{failed:!0,...h}),text:(l,h)=>(d.set("Content-Type","text/plain; charset=utf-8"),R(l,h)),html:(l,h)=>(d.set("Content-Type","text/html; charset=utf-8"),R(l,h)),parseBody:async()=>w!==void 0?w:w=Ie(b.request,L,o),json:(l,h)=>(d.set("Content-Type","application/json; charset=utf-8"),R(l,JSON.stringify(h))),send:R,isDirty:()=>g!==null,getWritableStream:()=>(g===null&&(g=e.getWritableStream(y,d,c,n,b)),g)};return Object.freeze(b)}function M(e){return e[Y]}function H(e){return e[Z]}function je(e){return e[V]}function ee(e){return e[G]}var U=999999999,Ie=async(e,t,r)=>{var a;const i=e.clone(),o=((a=e.headers.get("content-type"))==null?void 0:a.split(/[;,]/,1)[0].trim())??"";if(o==="application/x-www-form-urlencoded"||o==="multipart/form-data"){const n=await i.formData();return t.set(E,n),ze(n)}else{if(o==="application/json")return await i.json();if(o==="application/qwik-json")return r._deserializeData(await i.text())}},ze=e=>{const t={};return e.forEach((r,a)=>{const i=a.split(".").filter(n=>n);let o=t;for(let n=0;n<i.length;n++){let s=i[n];n===i.length-1?s.endsWith("[]")?(s=s.slice(0,-2),o[s]=o[s]||[],o[s].push(r)):o[s]=r:o=o[s]={...o[s]}}}),t};function Qe(e,t,r,a=!0,i="/",o){let n;const s=new Promise(u=>n=u),f=Le(e,t,r,a,i,o,n);return{response:s,requestEv:f,completion:Ne(f,n)}}async function Ne(e,t){try{await e.next()}catch(r){if(r instanceof W)await e.getWritableStream().close();else if(r instanceof B){if(console.error(r),!e.headersSent){const a=de(r.status,r);e.html(r.status,a)}}else if(!(r instanceof T)){if(ee(e)!=="dev")try{e.headersSent||(e.headers.set("content-type","text/html; charset=utf-8"),e.cacheControl({noCache:!0}),e.status(500));const a=e.getWritableStream();if(!a.locked){const i=a.getWriter();await i.write($.encode(J(500,"Internal Server Error"))),await i.close()}}catch{console.error("Unable to render error page")}return r}}finally{e.isDirty()||t(null)}}function qe(e,t){if(e.endsWith(S)){const r=e.length-Ue+(t?1:0);e=e.slice(0,r),e===""&&(e="/")}return e}var te=e=>e.endsWith(S),S="/q-data.json",Ue=S.length,Fe=async(e,t,r,a)=>{if(Array.isArray(e))for(const i of e){const o=i[0].exec(a);if(o){const n=i[1],s=Je(i[2],o),f=i[4],u=new Array(n.length),c=[],d=Be(t,a);let m;return n.forEach((p,g)=>{F(p,c,w=>u[g]=w,r)}),F(d,c,p=>m=p?.default,r),c.length>0&&await Promise.all(c),[s,u,m,f]}}return null},F=(e,t,r,a)=>{if(typeof e=="function"){const i=I.get(e);if(i)r(i);else{const o=e();typeof o.then=="function"?t.push(o.then(n=>{a!==!1&&I.set(e,n),r(n)})):o&&r(o)}}},Be=(e,t)=>{if(e){t=t.endsWith("/")?t:t+"/";const r=e.find(a=>a[0]===t||t.startsWith(a[0]+(t.endsWith("/")?"":"/")));if(r)return r[1]}},Je=(e,t)=>{const r={};if(e)for(let a=0;a<e.length;a++){const i=t?.[a+1]??"",o=i.endsWith("/")?i.slice(0,-1):i;r[e[a]]=decodeURIComponent(o)}return r};async function Ke(e,t,r){const{render:a,qwikCityPlan:i}=t,{routes:o,serverPlugins:n,menus:s,cacheModules:f,trailingSlash:u,basePathname:c}=i,d=e.url.pathname,m=qe(d,u),p=await Xe(n,o,s,f,m,e.request.method,a);return p?Qe(e,p[0],p[1],u,c,r):null}async function Xe(e,t,r,a,i,o,n){const s=await Fe(t,r,a,i),f=Ae(e,s,o,De(n));return f.length>0?[s,f]:null}function Ye(e){const t={_deserializeData:ie,_serializeData:se,_verifySerializable:oe};e.manifest&&ce(e.manifest);async function r(a,i){try{const o=new URL(a.url);if(ne(a.method,o)||o.pathname.startsWith("/.netlify"))return i.next();const n={mode:"server",locale:void 0,url:o,env:Deno.env,request:a,getWritableStream:(u,c,d,m)=>{const{readable:p,writable:g}=new TransformStream,w=new Response(p,{status:u,headers:xe(c,d)});return m(w),g},platform:i},s=await Ke(n,e,t);if(s){s.completion.then(c=>{c&&console.error(c)});const u=await s.response;if(u)return u}const f=ae(o.pathname);return new Response(f,{status:404,headers:{"Content-Type":"text/html; charset=utf-8","X-Not-Found":o.pathname}})}catch(o){return console.error(o),new Response(String(o||"Error"),{status:500,headers:{"Content-Type":"text/plain; charset=utf-8","X-Error":"netlify-edge"}})}}return r}const et=Ye({render:fe,qwikCityPlan:le,manifest:ue});export{et as default};
